### 📌 11. 모듈

일반적으로 웹사이트는 여러개의 JS파일로 이루어져있다. 문제는 웹사이트가 하는일이 많다면 JS의 파일이 그만큼 많이 늘어난다는점인데, 이전에는 스크립트간 통신을 위해 `전역 스코프에 존재하는 변수` 를 사용해야했다. 이 점을 해소하기 위해서 등장한게 모듈인데, **모듈을 사용하면 스크립트간의 의존도를 파악할 수 있고 실행 순서를 쉽게 제어할 수 있다는 장점이 있다.**

> ### **모듈? 컴포넌트?**
흔히 모듈과 컴포넌트를 혼동하는 경우가 많은데 **모듈은 설계 시점에 의미있는 요소, 컴포넌트는 런타임 시점에 의미있는 요소**라고 생각하자. (모듈은 의식적으로 나눠놓은 요소, 컴포넌트는 나눠놓은 요소에 포함되어 실행되는 요소) **하지만, JS 모듈은 직접적으로 런타임에 실행된다는 것을 기억해두자.**

JS가 지원하는 모듈은 로컬 파일에서는 동작하지 않는다. -> Http, Https 프로토콜을 통해서만 동작하므로 서버를 사용해야함 (간단한 웹 서버로 http-server를 사용할 수 있다.)

script 태그의 속성을 `type='module'` 로 지정하면 해당 스크립트는 모듈로 동작하게 된다.

```html
<script type='module'>
  import {hello} from './hello.js';
  
</script>
```

### 📌 모듈의 특징

모듈은 일반 스크립트와는 다르게 다음과 같은 특징들이 있다.

> - 항상 `use strict`로 실행
- `모듈 레벨 스코프`가 있다. (최상위에 변수를 선언해도 전역 스코프에 올라가지 않고 자체적인 '모듈 레벨 스코프'에 올라가게 됨 -> 모듈 스크립트에서는 import 하지 않을 경우 다른 스크립트에서 참조가 불가능)
- 단 한 번만 평가됨
- `지연 실행`된다.

#### 3번 예시

```html
<script type='module'>
  import {hello} from './hello.js';
  
</script>

<script type='module'>
  // 두 번 import되었지만 실행은 단 한 번만 됨
  import {hello} from './hello.js';
  
</script>
```

#### 4번 예시

```html
<script type='module'>
  // DOM이 생성되기 전 실행됨
  console.log(text);  // Error 발생!
</script>

<script type='module'>
   // DOM이 모두 만들어진 후 실행됨
  // defer를 적용한 것과 같다.
  console.log(text);  //  <p id='text'>Hello, World!</p>
</script>

<p id='text'>Hello, World!</p>
```

요즘은 대부분이 **webpack 같은 모듈 번들링** 을 사용하기 때문에 크게 모듈 스크립트를 사용할 일이 많지 않다. (하지만 모듈의 동작원리는 웹팩에서도 유사하기 때문에 알아두면 좋다!)
